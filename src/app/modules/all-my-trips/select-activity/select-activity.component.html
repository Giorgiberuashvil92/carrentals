<div class="wrapper relative">
    <img class="close-dialog-btn absolute cursor-pointer" src="/assets/close-dialog-icon.svg" alt="" (click)="dialogService.closeDialog()">
    
    <div class="select-activity">
        Select the activity:
    </div>

    <div class="form-wrapper">

        <div class="text-field flex justify-around align-center">
            <img class="cursor-pointer" src="/assets/search-icon.svg" alt="">
            <input type="text" [(ngModel)]="acitivityInput" (input)="searchActivity()">
        </div>

        <div class="select-city">
            Select city or cities:
        </div>

        <div class="cities-wrapper flex flex-wrap">
            <div class="city cursor-pointer" *ngFor="let c of cities" (click)="toggleCity(c)" [ngClass]="{ 'city__active': citySet.has(c)}">
                {{ c }}
            </div>
        </div>

        <div class="interested-in">
            You are interested in...
        </div>

        <div class="interests-wrapper flex flex-wrap">
            <div class="interest cursor-pointer" *ngFor="let i of interests" (click)="toggleInterest(i)" [ngClass]="{ 'interest__active': interestSet.has(i)}">
                {{ i }}
            </div>
        </div>

        <ng-container *ngIf="currentlyChosenIndex < 0">
            <div class="line"></div>
    
            <div class="searching-for-activities text-center">
                Searching for activities for you...
            </div>
        </ng-container>

        <ng-container *ngIf="currentlyChosenIndex >= 0">
            <div class="recommended-for">
                Recommended for <span class="recommended-for-value">CASTLE</span>
            </div>
    
    
            <div class="activity-wrapper flex justify-between">
                <div class="activity relative flex cursor-pointer" 
                    *ngFor="let r of result; let i=index" 
                    [ngClass]="{ 'activity__active': i === currentlyChosenIndex}"
                    (click)="currentlyChosenIndex = i">
                    
                    <div class="current absolute flex items-center" *ngIf="i === currentlyChosenIndex">    
                        <div class="current-icon">
                            <img src="/assets/tick-circle-icon.svg" alt="">
                        </div>
                    </div>
                    
                    <div class="image" [style.background-image]="'url(\'' + r.img + '\')'"></div>
        
                    <div class="detail-wrapper">
                        <div class="city-detail">
                            {{ r.city }}
                        </div>

                        <div class="title-self-guided">
                            {{ r.title }}  {{ r.isSelfGuided ? '(Self Guided)' : '' }}
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>

    </div>

    <div class="actions absolute flex justify-between" *ngIf="currentlyChosenIndex >= 0">
        <button class="cancel-button" (click)="dialogService.closeDialog()">
            CANCEL
        </button>
        <button class="next-button" (click)="dialogService.closeDialog(); dialogService.openDialog('arriveDay')">
            NEXT
        </button>
    </div>
</div>